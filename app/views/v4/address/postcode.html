{% extends "layout.html" %}

{% set title = "Search for a location" %}

{% block pageTitle %}
    {{title}} - GOV.UK
{% endblock %}

{% block beforeContent %}
<div class="govuk-phase-banner">
  <p class="govuk-phase-banner__content"><strong class="govuk-tag govuk-phase-banner__content__tag ">
  alpha
</strong>
    <span class="govuk-phase-banner__text">
      This is a new service â€“ your
      <a class="govuk-link" href="#">feedback</a> will help us to improve it.
    </span>
  </p>
</div>

{{backlink|safe}}

{% endblock %}

{% block content %}

{% if data.lookupError %}

    {% set errorMessage = 'There was a problem' %}

    {% if data.lookupError == 'not-found' %}

        {% set errorMessage = 'No addresses were found at this postcode' %}

    {% endif %}

    {% if data.lookupError == 'invalid' %}

        {% set errorMessage = 'Enter a real postcode' %}

    {% endif %}

{% endif %}

<div class="govuk-grid-row">

    <div class="govuk-grid-column-two-thirds">

 {% if data.lookupError %}
                
                {{ govukErrorSummary({
                    titleText: 'There is a problem',
                    errorList: [
                        {
                        text: errorMessage,
                        href: '#address-lookup-postcode'
                        }
                    ]
                }) }}
                
            {% endif %}

      <form action="/address-lookup/search" method="post">

        <div class="govuk-form-group">
            <fieldset class="govuk-fieldset">

            <legend class="govuk-fieldset__legend govuk-fieldset__legend--l">
                {{title}}
            </legend>
            <p>Enter a full postcode for the location you are interested in. We will see if it is in an area we check for flooding.</p>         

      

                {{ govukInput ({
                    id: 'address-lookup-name-number',
                    name: 'address-lookup-name-number',
                    value: data['address-lookup-name-number'],
                    classes: 'govuk-input--width-20',
                    label: {
                        text: 'Building name or number (optional)'
                    }
                }) }}

                {{ govukInput ({
                    id: 'address-lookup-postcode',
                    name: 'address-lookup-postcode',
                    value: data['address-lookup-postcode'] if data['address-lookup-postcode'] else '',
                    classes: 'govuk-input--width-10',
                    label: {
                        text: 'Postcode'
                    },
                    errorMessage: {
                        text: errorMessage
                    } if data.lookupError
                }) }}

                <input type="hidden" name="next-page" value="/v4/address/address-confirm">
                <input type="hidden" name="error-page" value="/v4/address/postcode">

 
          </div>

    



        </fieldset>

        <div class="form-group">
          {{submitButton|safe}}
        </div>
<p><a href="address">No match unhappy path</a></p>
        <div class="form-group">
          <hr>
          <p class="text font-xsmall" id="os-notice">
            &copy; Crown copyright and database rights 2017 Ordnance Survey 100024198. Use of this addressing data is subject to the <a target="_blank" rel="noopener noreferrer" href="/{{folder}}/address/os_place_terms">terms and conditions (opens new window)</a>.
          </p>
        </div>

      </form>

    </div>
  </div>

</main>

{% endblock %}
