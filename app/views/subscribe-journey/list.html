{% extends 'layout.html' %}

{% block pageTitle %}
    List
{% endblock %}

{% block beforeContent %}

    {{ super() }}

    {{ govukBackLink ({
        text: 'Back',
        href: 'javascript:history.back()'
    }) }}

{% endblock %}

{% block content %}

<div class="govuk-grid-row">

        <div class="govuk-grid-column-two-thirds">

            <form method="post">

                               {% if data.contactSignup=="email" or data.contactSignup=="text" or data.contactSignup=="phone"%}
                <h1 class="govuk-heading-l">Your flood risk areas</h1>
                <p>Your account is created, you will now get the following warnings sent to {{data.contactByEmail}}{{data.contactByPhone}}{{data.contactByText}}.</p>
                 </br>
                    {% else %}
                 <h1 class="govuk-heading-l">Review your flood risk areas</h1>

                    {% endif %}
                {% set alertAreaIds = data.subscribedAreas | alertAreaIds %}

                {% set warningAreaIds = data.subscribedAreas | warningAreaIds %}

                {% if warningAreaIds | length or alertAreaIds | length %}

                    {% if warningAreaIds | length %}

                        <div class="govuk-!-margin-bottom-9">

                        <h2 class="govuk-heading-m">High risk flood areas</h2>

                            {% for subscribedAreaId in warningAreaIds%}

                                {% set area = data.allFetchedAreas[subscribedAreaId] %}

                                <h3 class="govuk-heading-s">{{ area.label }}</h3>
                                <p>{{ area.description }}</p>

                                <p>
                                    <a href="area-view?selected-area={{ subscribedAreaId }}">View</a>
                                    <a href="area-remove?selected-area={{ subscribedAreaId }}" class="app-link-destructive govuk-!-margin-left-2">Remove</a>
                                </p>

                                <hr class="govuk-section-break govuk-section-break--m govuk-section-break--visible">

                            {% endfor %}

                        </div>

                    {% endif %}

                    {% if alertAreaIds | length %}

                        <div class="govuk-!-margin-bottom-9">

                            <h2 class="govuk-heading-m">Medium risk flood areas</h2>

                            {% for subscribedAreaId in alertAreaIds%}

                                {% set area = data.allFetchedAreas[subscribedAreaId] %}

                                <h3 class="govuk-heading-s">{{ area.label }}</h3>
                                <p>{{ area.description }}</p>

                                <p>
                                    <a href="area-view?selected-area={{ subscribedAreaId }}">View</a>
                                    <a href="area-remove?selected-area={{ subscribedAreaId }}" class="app-link-destructive govuk-!-margin-left-2">Remove</a>
                                </p>

                                <hr class="govuk-section-break govuk-section-break--m govuk-section-break--visible">

                            {% endfor %}

                        </div>

                    {% endif %}

                    <p>
                        <a href="postcode">Add more areas near a different postcode</a>
                    </p>
                               {% if data.contact=="textSignin" or data.contact=="emailSignin" or data.contact=="phoneSignin" or data.contactSignup=="email" or data.contactSignup=="text" or data.contactSignup=="phone"%}

                     {{ govukButton ({
                        html: 'Sign out',
                        href: '/'
                      }) }}

                {% else %}

                    {{ govukButton ({
                        html: 'Sign up to get alerts',
                        href: '/sign-up/contact'
                    }) }}



                    {% endif %}

                {% else %}

                    <p>You have not chosen any flood risk areas to get alerts for.</p>

                    <p>
                        <a class="govuk-button" href="postcode">Try another postcode</a>
                    </p>

                    <p> 
                    <a href="#">Check for flooding</a> in your area.
                    </p>
                
                {% endif %}
            </form>
              
        </div>

</div>

{% endblock %}
